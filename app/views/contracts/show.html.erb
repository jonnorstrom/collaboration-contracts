<div class="container">
  <div class="row contract-header">
    <div class="row">
      <!-- contract links  -->
      <div class="text-center col-xs-4">
        <%= render 'contracts/link' %>
        <% if @owner %> <%= render 'contracts/owner_link' %> <% end %>
      </div>
      <!-- contract title  -->
      <h2 class="col-xs-4 text-center"><%= @contract.title %></h2>
      <!-- owner options (review & complete) -->
      <% if @owner %>
        <% @contract.reviewable ? @status = "ON" : @status = "OFF" %>
        <% @contract.complete ? @complete = "Close" : @complete = "Open" %>
        <h5 class="col-xs-4 text-center">Team Review is <%= link_to @status, contracts_update_path(:id=>@contract.id, :link=>@contract.owner_link, :task=>"review"), :method=>:post %></h5>
        <h5 class="col-xs-4 text-center"><%= link_to "#{@complete} Contract", contracts_update_path(:id=>@contract.id, :link=>@contract.owner_link, :task=>"complete"), :method=>:post %></h5>
      <% end %>
    </div>
    <!-- contract theme -->
    <div class="row">
      <p class="text-center"><%= @contract.theme %></p>
    </div>
  </div>
  <!-- render decisions -->
  <% if @contract.decisions %>
      <%= render 'decisions/show', :@decisions => @contract.decisions.order('id'), :@user => @user, :@owner => @owner %>
  <% end %>
  <!-- add decision button -->
  <button type="button" class="btn btn-primary btn-lg col-xs-4 col-xs-offset-4" data-toggle="modal" data-target="#newDecisionModal">Add Decision</button>
  <!-- modal for new decision  -->
  <div id="newDecisionModal" class="modal fade" role="dialog">
    <%= render 'decisions/new_modal', :@contract_id => @contract.id, :@decision => nil %>
  </div>
</div>

<% if @decision_error_messages %>
  <script>
    $(window).load(function(){
        $('#newDecisionModal').modal('show');
    });
  </script>
<% end %>
