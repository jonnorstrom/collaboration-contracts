<div class="container">

  <div class="row contract-header">
    <div class="row">
      <!-- contract title & theme -->
      <div class="col-sm-12 text-center">
        <h2><%= @contract.title %></h2>
        <%= @contract.theme %>
      </div>
      <!-- owner options (review & complete) -->
      <% if @owner %>
        <div class="button_container col-sm-12">
          <div class="buttons">
            <div class="dropdown">
              <i class="fa fa-user-plus fa-2x btn btn-primary" id="new_user_dropdown" data-toggle="dropdown"></i>
              <div class="dropdown-menu" id="new_user_dropdown">
                <%= render 'contracts/link' %>
                <br>
                <%= render 'contracts/owner_link' %>
              </div>
            </div>
            <% @contract.reviewable ? @user_icon = "fa-users" : @user_icon = "fa-user" %>
            <% @contract.complete ? @lock_icon = "fa-lock" : @lock_icon = "fa-unlock-alt" %>
            <%= link_to "<i class='fa fa-2x btn btn-primary #{@user_icon}' aria-hidden='true'></i>".html_safe, contracts_update_path(:id=>@contract.id, :link=>@contract.owner_link, :task=>"review"), :method=>:post  %>
            <%= link_to "<i class='fa fa-2x btn btn-primary #{@lock_icon}' aria-hidden='true'></i>".html_safe, contracts_update_path(:id=>@contract.id, :link=>@contract.owner_link, :task=>"complete"), :method=>:post  %>
            <%= link_to "<i class='fa  fa-2x fa-trash-o btn btn-danger'  aria-label='Delete'></i>".html_safe, contracts_delete_path(:contract_id=>@contract.id ), :method => :delete, :data => {:confirm => 'Are you sure?'} %>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <!-- render decisions -->
  <% if @contract.decisions %>
      <%= render 'decisions/show', :@decisions => @contract.decisions.order('id'), :@user => current_user, :@owner => @owner %>
  <% end %>
  <!-- add decision button -->
  <button type="button" class="btn btn-primary btn-lg col-xs-4 col-xs-offset-4" data-toggle="modal" data-target="#newDecisionModal">Add Decision</button>
  <!-- modal for new decision  -->
  <div id="newDecisionModal" class="modal fade" role="dialog">
    <%= render 'decisions/new_modal', :@contract_id => @contract.id, :@decision => nil %>
  </div>
</div>

<% if @decision_error_messages %>
  <script>
    $(window).load(function(){
        $('#newDecisionModal').modal('show');
    });
  </script>
<% end %>
